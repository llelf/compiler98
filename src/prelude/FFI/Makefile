include Makefile.inc

THISLIB	= FFI
SEARCH	= -P../IOExtras -P$(LOW)
EXTRA_H_FLAGS	=
EXTRA_C_FLAGS	=

SRCS	= \
	Addr.hs ForeignObj.hs Ptr.hs ShowsIntBase.hs StablePtr.hs
SRCS_T	= \
	Addr.hs ForeignObj.hs Ptr.hs ShowsIntBase.hs

NotYetSRCS = Int.hs Word.hs


# Here are the main rules.
include ../Makefile.common


# Here are the dependencies.

# dependencies generated by hmake -Md: (and hacked by MW)
${OBJDIR}/Addr.$O: ${OBJDIR}/ShowsIntBase.$O 

Addr.c: ShowsIntBase.c 

## Yucky .hi stuff to deal with mutual dependencies.
IOHIFILES =  FixIO UnsafePerformIO
IOHIS     = $(patsubst %,../IOExtras/%.${HISUFFIX},${IOHIFILES})

${OBJ_MAIN}:   ../IOExtras/FixIO.${HISUFFIX}
${CFILE_MAIN}: ../IOExtras/FixIO.${HISUFFIX}
${IOHIS}: ../IOExtras/%.${HISUFFIX} : ../IOExtras/%.hs
	cd ../IOExtras; ${MAKE} $@

../IOExtras/FixIO.${HISUFFIX}: ../IOExtras/UnsafePerformIO.${HISUFFIX}


