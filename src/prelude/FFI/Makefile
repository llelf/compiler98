include Makefile.inc

THISLIB	= FFI
SEARCH	= -P../IOExtras -P$(LOW)
EXTRA_H_FLAGS	=
EXTRA_C_FLAGS	=

SRCS	= \
	Addr.hs ForeignObj.hs Ptr.hs ShowsIntBase.hs StablePtr.hs
SRCS_T	=

NotYetSRCS = Int.hs Word.hs


# Here are the main rules.
include ../Makefile.common


# Here are the dependencies.

# dependencies generated by hmake -Md: (and hacked by MW)
${OBJDIR}/Addr.o: ${OBJDIR}/ShowsIntBase.o 

Addr.c: ShowsIntBase.c 

## Yucky .hi stuff to deal with mutual dependencies.
IOHIFILES =  FixIO UnsafePerformIO
IOHIS     = $(patsubst %,../IOExtras/%.hi,${IOHIFILES})

${OBJ_MAIN}:   ../IOExtras/FixIO.hi
${CFILE_MAIN}: ../IOExtras/FixIO.hi
${IOHIS}: ../IOExtras/%.hi : ../IOExtras/%.hs
	cd ../IOExtras; ${MAKE} $@

../IOExtras/FixIO.hi: ../IOExtras/UnsafePerformIO.hi


