<html><head><title>nhc98 release history</title></head>
<body bgcolor=#ffffff>
<table><tr><td width=530>

<center><h1>nhc98 release history</h1></center>

<hr>

<h3>nhc98 release 1.02 (2001-02-14) features</h3>
<ul>
<li> Improvement: Fixed a space-leak in the compiler.  Compilation now
              requires approximately half the previous maximum heap,
              and as a result, compile time is 5-10% faster.
<li> Update:  'hi' now uses GNU's readline library if available.
<li> Update:  Improved error reporting in hmake.
<li> Update:  Improved the raw speed of both output and input for compiled
              programs, by between 3x and 10x, depending on usage.
<li> Bugfix:  Auto-configuration of hmake.  It occasionally failed to find
              an already-installed version of nhc98.  Also, on Solaris
              (and other System V based OSes), auto-detection of
              hbc and/or ghc sometimes failed due to incompatibility
              of the 'which' command.  Finally, the 'hmake' script
              itself failed on Cygwin due to the 'which' command
              being missing altogether.
<li> Bugfix:  'atan2' in class RealFloat - revert to a default
              declaration that does not use 'isNegativeZero', because
              we don't implement the latter.
<li> Bugfix:  Foreign functions declared of IO return type (especially
              zero-arity CAFs) using the primitive FFI could suffer from
              unexpected sharing of results.
<li> Bugfix:  Failure to build BinArray library on FreeBSD (htonl/ntohl errors).
<li> Bugfix:  Incorrect definitions of inRange and rangeSize in Ix library.
<li> Bugfix:  Local infix declarations in `where' blocks were ignored.
<li> Bugfix:  Some non-trivial `newtype' decls produced spurious errors.
<li> Bugfix:  Printing of characters in the range 0x0100 to 0xffff now works.
<li> Bugfix:  @-pattern-bindings are now fixed.  As a result, Happy-generated
              parsers should now compile correctly.
<li> Bugfix:  We now accept {-# pragmas #-} in any position, and understand
              LINE pragmas.
</ul>
The following updates and bugfixes are specifically for <em>Hat</em>,
the redex-trail-based tracing and debugging system.
<ul>
<li> New Feature:  When a traced program is interrupted or terminates with
                   an error, you get a virtual stack trace of the
                   computation "for free", without having to start up
                   a browser.
<li> Update:  Foreign imports (via the new common primitive FFI) with an
              I/O result type are now also traced (previously only pure
              foreign functions were traced).
<li> Update:  Interface and object files for tracing now have distinct
              file suffixes: .T.hi and .T.o.  This improves matters
              enormously when switching between normal and tracing versions
              of a program.  It also fixes some dependency bugs when
              building the tracing version of the compiler.  Both the
              compiler and hmake have knowledge of the new suffixes.
<li> Bugfix:  The 'rtb' script failed because of missing shell quotes.
<li> Added standard libraries:  IO, Array.
        (Still missing: Directory, System, Time, Locale, CPUTime, Random.)
<li> Added extension libraries:  FFI, IOExtras.
</ul>


<hr>


<h3>full nhc98 release 1.00 (2000-09-15) features</h3>
<ul>
<li> Update:  Many changes to the nhc98 tracer (listed separately below)
              and a new name for the tracing system: <em>Hat</em>.
<li> Update:  Many changes to <em>hi</em> (hmake interactive), both to
              improve the automatic configuration and to add features.
<li> Addition:  Andy Gill's HOOD debugging library.
<li> Addition:  New commandline flag -showtype, used by <em>hi</em> to
                display types of expressions.
<li> Addition:  New options for hmake: -clean and -realclean.
<li> Documentation:   We have added many more comments and type signatures
                      to the compiler, so implementers should find it easier
                      to read.
<li> Bugfix:  Added correct derivation for Read and Show classes on named
fields.<li> Bugfix:  Configuration bugs for Cygwin and Solaris.
<li> Bugfix:  Configuration for 'echo -n' on certain OSes.
<li> Bugfix:  Parser now accepts {-# pragmas #-}.
<li> Bugfix:  Directory.closedir: ensure directory is finalised only once.
<li> Bugfix:  New functions FFI.withForeignObj and FFI.touchForeignObj.
<li> Bugfix:  List.isPrefixOf: second clause was missing.
<li> Bugfix:  System.getEnv: throws error when symbol is undefined.
<li> Bugfix:  Prelude.lex "1..n" now returns [("1", "..n")].
<li> Bugfix:  Added Read and Show instances for 5-tuples.
<li> Bugfix:  Doubles were occasionally truncated to Float, Floats were
              occasionally promoted to Double.
<li> Portability: You can now run nhc98comp with Hugs!  (although this is
                  unlikely to be directly useful to anyone.)
</ul>
The following updates and bugfixes are specifically for <em>Hat</em>,
the redex-trail-based tracing and debugging system.
<ul>
<li> Literal numeric expressions and patterns now work again (previously
     broken in the move to Haskell'98).
<li> Added arithmetic primitives for Integer, Float, and Double types.
<li> Added rules for the primitive FFI (foreign import only).
<li> Added standard libraries: Ratio, Complex, Numeric, Ix, List,
         Maybe, Char, Monad.  (Still missing: Array, Directory, System,
         Time, Locale, CPUTime, Random.)
<li> Fixed the compilation of newtypes.
<li> Fixed derived instances of classes.
<li> Fixed compiler conflict between Java 1.1 and 1.2.
</ul>


<h3>nhc98 pre-release 19 (2000-06-05) features</h3>
<ul>
<li> Big Change: Until recently, the normal/profiling and tracing
                 versions of the Prelude and Libraries have been
                 kept in separate source trees.  The normal set is
                 Haskell'98 compliant, the tracing set was 1.3 and
                 incomplete.  We have now merged the two sets so that
                 all the libraries which actually build for tracing
                 are genuinely Haskell'98.  There are still several
                 libraries that don't compile for tracing yet, but this
                 is nevertheless a big step forward to improving the
                 tracing experience.
<li> Addition: Implementations of the standard Time and CPUTime
               libraries.  All standard libraries are now implemented
               in normal and profiling versions.
<li> Addition: "hmake interactive" - a brand new Hugs-like
               interpreter for interactive development.
<li> Change:   The trace browser command has now been renamed
               <tt>rtb</tt> for "Redex Trail Browser".
<li> Bugfix:   IO.hgetLine was broken.
</ul>


<h3>nhc98 pre-release 18 (2000-04-10) features</h3>
<ul>
<li> Bugfix: More patches needed for building with ghc-4.06.
<li> Bugfix: The new implementations of two Directory functions
             (doesFileExist and doesDirectoryExist) threw IOErrors
             when they shouldn't.
<li> Addition: We've improved the error messages given by the Directory IO
               functions to include more information about what caused
               the error.
<li> Addition: A new compiler flag <em>-report-imports</em>.
</ul>

<h3>nhc98 pre-release 17 (2000-03-14) features</h3>
<ul>
<li> Bugfix: Now builds with ghc-4.06 as well as ghc-4.04 and earlier.
<li> Bugfix: Occasional runtime crashes when using Arrays are now eliminated.
</ul>

<h3>nhc98 pre-release 16 (2000-03-02) features</h3>
<ul>
<li> Addition: The standard Random library.
<li> Addition: The standard Directory library.
<li> Addition: The common IOExtras library.
<li> Bugfixes: Various small configuration bugfixes.
</ul>

<h3>nhc98 pre-release 15 (2000-01-18) features</h3>
<ul>
<li> Bugfix: There were some minor build-problems with pre14 which I
             hope are now fixed.
<li> Bugfix: Duplicate labels error when building the mutator
             for profiling.
<li> Bugfix: Erroneous compiler complaints about class contexts when
             building certain Prelude functions.
<li> Bugfix: Missing file FFIBuiltin.hi.
</ul>

<h3>nhc98 pre-release 14 (1999-12-02) features</h3>
<ul>
<li> Update: Various tweaks and additions to the new FFI to make it more
             solid.  Libraries now include Sven Panne's FFI.
<li> Performance: Thanks to Julian Seward's prompting, we have improved
             the runtime performance of nhc98-compiled programs by about
             25% (if you have gcc).  This also means that if you bootstrap
             nhc98 from C sources, you will get a faster compiler.
</ul>

<h3>nhc98 pre-release 13 (1999-11-19) features</h3>
<ul>
<li> Addition: Completely new FFI added, following the Hugs/ghc model.
               Beware, this is still alpha - It might even break unrelated
               things that worked previously!  If in doubt, use 1.0pre12.
<li> Bugfixes: Numerous small fixes for building on various machines.
</ul>

<h3>nhc98 pre-release 12 (1999-10-29) features</h3>
<ul>
<li> Bugfix: Removed incorrect .h symbolic links.  (This patch hardly
             seems worth a whole new pre-release, but the bug prevented
             all builds from proceeding.)
<li> Bugfix: On HP-UX machines, the ansiC backend had a problem due to
             conflicts between data/code at link time.
</ul>

<h3>nhc98 pre-release 11 (1999-10-26) features</h3>
<ul>
<li> Bugfix: Minor fixes to config and Makefiles for <em>Cygwin</em>.
</ul>

<h3>nhc98 pre-release 10 (1999-10-19) features</h3>
<ul>
<li> Update: Compiling programs for tracing now works again, although
             tracing versions of the Prelude and Libraries are still
             not fully up-to-date with Haskell'98.  The trace browser
             now has a scripting facility to record your tracing activity
             for later replay.
<li> Update: The removal of named field punning in Haskell'98 has
             turned out to be unpopular.  nhc98 now supports punning
             again as a compile-time option (default on, except in
             -98 compatibility mode).
<li> Update: The old 'nhc98config' is now simplified and called 'configure'.
             This means that "./configure; make; make install" should now
             work as expected.
<li> Update: At configuration time for hmake, we now try to detect existing
             installations of ghc/hbc/nhc and provide sensible defaults,
             so you should no longer need to edit config files.
<li> Bugfix: Resolved conflicts when using hmake flags -I and -d together.
<li> Bugfix: Some changes to Makefiles, so building on <em>Cygwin32</em>
             is easier.
<li> Bugfix: hSetPosn had wrong arity.
</ul>

<h3>nhc98 pre-release 9 (1999-09-16) features</h3>
<ul>
<li> Bugfix: Library module Maybe was missing the definition isNothing.
<li> Bugfix: Several changes to Makefiles, so building with <em>ghc</em>
             is easier.
<li> Bugfix: hmake is more <em>ghc</em>-friendly.
<li> Update: The standard cpp symbols __HASKELL98__ and __HASKELL__=98 are
             now supported.
</ul>

<h3>nhc98 pre-release 8 (1999-08-06) features</h3>
<ul>
<li> Bugfix: Initialisation of a value using named fields failed to type-check
             if some fields were missing.
<li> Bugfix: Several small script changes required when compiling with <em>ghc</em>.
<li> Bugfix: Compiler fault in processing interface-files - prevented
             profiling and tracing versions of the prelude/libraries from
             building unless the old interface files were removed first.
</ul>

<h3>nhc98 pre-release 7 (1999-07-23) features</h3>
<ul>
<li> Bugfix: Brought layout processing into line with the algorithm
             given in the Report.
<li> Update: Underscores are now (optionally) treated in full accordance
             with the Report as strictly lower-case.
<li> Update: Licensing conditions for nhc98 are now more explicit.
</ul>

<h3>nhc98 pre-release 6 (1999-06-10) features</h3>
<ul>
<li> Update: At last, we grudgingly support <tt>(n+k)</tt> patterns.
</ul>

<h3>nhc98 pre-release 5 (990519) features</h3>
<ul>
<li> Change: Simpler configuration for hmake and nhc98.
<li> Update: Infix decls now allowed anywhere type signatures are.  Modules
             can be imported unqualified with a local alias.  Aliases can
             overlap.  Empty decls (i.e. extra explicit semicolons) are allowed. 
<li> Bugfix: isAlphanum is now isAlphaNum.
<li> Bugfix: Derived Read instances for non-associative infix constructors
             now work (previously looped).
</ul>

<h3>nhc98 pre-release 4 (990503) features</h3>
<ul>
<li> Fixes: compiler's source code needs to compile under Haskell 98 also!
</ul>

<h3>nhc98 pre-release 3 (990427) features</h3>
<ul>
<li> Fixes: compiler has better compliance with Haskell 98.  (Maximal
     munch for comments, removed record punning, and numerous other changes.)
</ul>

<h3>nhc98 pre-release 2 (990217) features</h3>
<ul>
<li> Bugfix: Stable Pointers, as used in GreenCard, are now non-strict,
             i.e. passing the value (error "message") to C as a stable
             pointer no longer terminates the program immediately.
</ul>

<h3>nhc98 pre-release 1 (990128) features</h3>
<ul>
<li> Major change: nhc13 has become nhc98, supporting the new Haskell 98
                   language standard, although still incompletely.
<li> Major addition: Existential types in data declarations.
<li> Addition: New options <tt>-M</tt> and <tt>-Md</tt> to <em>hmake</em>.
<li> Bugfix: In the Binary library there was a very slight incompatibility
             between the types described in the ISMM'98 paper and the
             implementation.  The implementation is now fixed to match the
             paper.
<li> Bugfix: At last, the distribution tarfiles extract into an
             nhc98-x.x directory, rather than the current directory.
</ul>

<h3><a href=history.html>Release history of nhc13</a></h3>


<hr>
<p>
The latest updates to these pages are available on the WWW from
<a href="http://www.cs.york.ac.uk/fp/nhc98/">
<tt>http://www.cs.york.ac.uk/fp/nhc98/</tt></a>

<p>
This page last modified: 2001.02.13<br>
<a href="http://www.cs.york.ac.uk/fp/">
York Functional Programming Group</a><br>

</td></tr></table>
</body></html>

