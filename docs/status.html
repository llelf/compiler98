<html><head><title>nhc98 status</title></head>
<body bgcolor=#ffffff>
<table><tr><td width=530>

<center><h1>nhc98 status</h1></center>

<hr>

<p>
The latest stable release is 1.02.  The development tree is at
version 1.03.  Bugfixes and important changes to the system are
described here for both versions.

<p>

<hr>
<h3>nhc98 1.03 (CVS development version) features</h3>
<ul>
<li> New:	Support for extended module namespaces of the form
		Long.Hierarchical.Module.Name is now provided in both
		nhc98 and hmake.
<li> Update:	Improved printing of I/O error messages.
<li> Bugfix:	An identifier hidden on import and redefined in the
		current module, then exported, but also imported
		qualified and used qualified in the current module,
		led to an incorrect interface file being generated.
<li> Bugfix:	hmake issued an unnecessary -cpp flag on some literate files.
<li> Bugfix:	Type of IO.hSetPosn :: Handle -> HandlePosn -> IO ()
		was incorrect
<li> Bugfix:	Compile-time error in <tt>src/tracer/runtime/ident.c</tt>
		on RedHat 7 and other systems using the new ISO C standard
		for <tt>fpos_t</tt>.
<li> Bugfix:	A file opened in ReadMode or WriteMode was actually
		opened in ReadWriteMode, so if the file had strict
		permissions the correct opening command would fail.
		Conversely, opening in ReadWriteMode actually gave
		ReadMode instead, and file updates silently failed.
<li> Bugfix:	Operator sections suffered from priority inversion,
		for example (^2*3) was incorrectly parsed as (^(2*3)),
		even though ^ binds more tightly than *.
<li> Bugfix:	The library function Directory.createDirectory gave
		strange permissions to the new directory.  (Mode was
		in hex, but should have been octal!)

</ul>
The following updates and bugfixes are specifically for <em>Hat</em>,
the redex-trail-based tracing and debugging system.
<ul>
<li> New architecture:  Traced programs now build their trails in files,
		not in the heap.  This has four consequences:  (1)
		you no longer need to give your program large amounts
		of extra memory to trace it;  but (2) you may need to have
		large amounts of free disk space, particularly to trace
		long-running programs; (3) for the moment, traced
		programs now run even slower (we are working to improve
		this); and (4) trails are now first-class objects,
		so new tools can manipulate them to provide several
		different views of the computation.
<li> New tools:	Storing trails in files means we can now provide more
		tools to examine them.	<b>hat-connect</b>
		allows you to use the original graphical browser,
		now renamed <b>hat-trail</b>, to explore fully the
		redex trails stored in the file.
		<b>hat-stack</b> gives a virtual stack back-trace
		from a trail file (no need to re-run the program).
		<b>hat-check</b> verifies the integrity of the trail
		file, prints a textual dump, and gives statistics about
		its contents.  <b>hat-observe</b> gives you HOOD-like
		observation of the input and output from functions.
		<b>hat-detect</b> does algorithmic debugging in the style
		of Freja; it discovers and identifies the location of
		a bug after asking you some simple questions.
<li> Update:	Fuller Standard Library support for tracing: added
		Directory, System, CPUTime, Random.
		(Still missing: Time, Locale.)
<li> Update:	More Haskell'98 language features are accepted:
		named fields can now be traced, although the hat
		tools don't yet show them in source form.
</ul>

<hr>
<h3>nhc98 release 1.02 (2001-02-14) features</h3>
<ul>
<li> Improvement: Fixed a space-leak in the compiler.  Compilation now
              requires approximately half the previous maximum heap,
              and as a result, compile time is 5-10% faster.
<li> Update:  'hi' now uses GNU's readline library if available.
<li> Update:  Improved error reporting in hmake.
<li> Update:  Improved the raw speed of both output and input for compiled
              programs, by between 3x and 10x, depending on usage.
<li> Bugfix:  Auto-configuration of hmake.  It occasionally failed to find
              an already-installed version of nhc98.  Also, on Solaris
              (and other System V based OSes), auto-detection of
              hbc and/or ghc sometimes failed due to incompatibility
              of the 'which' command.  Finally, the 'hmake' script
              itself failed on Cygwin due to the 'which' command
              being missing altogether.
<li> Bugfix:  'atan2' in class RealFloat - revert to a default
              declaration that does not use 'isNegativeZero', because
              we don't implement the latter.
<li> Bugfix:  Foreign functions declared of IO return type (especially
              zero-arity CAFs) using the primitive FFI could suffer from
              unexpected sharing of results.
<li> Bugfix:  Failure to build BinArray library on FreeBSD (htonl/ntohl errors).
<li> Bugfix:  Incorrect definitions of inRange and rangeSize in Ix library.
<li> Bugfix:  Local infix declarations in `where' blocks were ignored.
<li> Bugfix:  Some non-trivial `newtype' decls produced spurious errors.
<li> Bugfix:  Printing of characters in the range 0x0100 to 0xffff now works.
<li> Bugfix:  @-pattern-bindings are now fixed.  As a result, Happy-generated
              parsers should now compile correctly.
<li> Bugfix:  We now accept {-# pragmas #-} in any position, and understand
              LINE pragmas.
</ul>
The following updates and bugfixes are specifically for <em>Hat</em>,
the redex-trail-based tracing and debugging system.
<ul>
<li> New Feature:  When a traced program is interrupted or terminates with
                   an error, you get a virtual stack trace of the
                   computation "for free", without having to start up
                   a browser.
<li> Update:  Foreign imports (via the new common primitive FFI) with an
              I/O result type are now also traced (previously only pure
              foreign functions were traced).
<li> Update:  Interface and object files for tracing now have distinct
              file suffixes: .T.hi and .T.o.  This improves matters
              enormously when switching between normal and tracing versions
              of a program.  It also fixes some dependency bugs when
              building the tracing version of the compiler.  Both the
              compiler and hmake have knowledge of the new suffixes.
<li> Bugfix:  The 'rtb' script failed because of missing shell quotes.
<li> Added standard libraries:  IO, Array.
        (Still missing: Directory, System, Time, Locale, CPUTime, Random.)
<li> Added extension libraries:  FFI, IOExtras.
</ul>



<h3><a href=history98.html>Previous release history (nhc98)</a></h3>
<h3><a href=history.html>Release history of nhc13</a></h3>


<hr>

<h3>Status of various components</h3>

<p>
<b>The basic, stable, components.</b>

<p>
<center>
<table border=1 cellspacing=0 cellpadding=2>
<tr bgcolor=#ddddff>
  <th bgcolor=#eeeeee>component</th>
  <td>compiler</td>
  <td>prelude + libraries</td>
  <td>heap profiling</td>
  <td>hp2graph</td>
  <td>GreenCard</td>
  <td>hmake</td>
</tr><tr>
  <th bgcolor=#eeeeee>quality</th>
  <td bgcolor=#ddffdd>release</td>
  <td bgcolor=#ddffdd>release</td>
  <td bgcolor=#ddffdd>release</td>
  <td bgcolor=#ddffdd>release</td>
  <td bgcolor=#ddffdd>release</td>
  <td bgcolor=#ddffdd>release</td>
</tr>
<tr bgcolor=#ddddff>
  <th bgcolor=#eeeeee>last change</th>
  <td>2001-04-24</td>
  <td>2001-04-20</td>
  <td>1997</td>
  <td>1996</td>
  <td>2000-11-23</td>
  <td>2001-02-08</td>
</tr>
</table>
</center>

<p>
<b>Newer components.</b>
Relatively recent additions to the compiler are the tracing transformation,
trace browsing tools (hat tools), time profiler, and common FFI.

<p>
<center>
<table border=1 cellspacing=0 cellpadding=2>
<tr bgcolor=#ddddff>
  <th bgcolor=#eeeeee>component</th>
  <td>tracing transformation</td>
  <td>hat tools</td>
  <td>time profiling</td>
  <td>common FFI</td>
  <td><em>hi</em></td>
  <td>HOOD</td>
</tr><tr>
  <th bgcolor=#eeeeee>quality</th>
  <td bgcolor=#ffffdd>beta</td>
  <td bgcolor=#ffffdd>beta</td>
  <td bgcolor=#ffdddd>alpha</td>
  <td bgcolor=#ffffdd>beta</td>
  <td bgcolor=#ffffdd>beta</td>
  <td bgcolor=#ffffdd>beta</td>
</tr>
<tr bgcolor=#ddddff>
  <th bgcolor=#eeeeee>last change</th>
  <td>2001-04-24</td>
  <td>2001-04-20</td>
  <td>1998</td>
  <td>2000-03-01</td>
  <td>2000-11-10</td>
  <td>2000-09-15</td>
</tr>
</table>
</center>

<hr>
<p>
The latest updates to these pages are available on the WWW from
<a href="http://www.cs.york.ac.uk/fp/nhc98/">
<tt>http://www.cs.york.ac.uk/fp/nhc98/</tt></a>

<p>
This page last modified: 2001.04.27<br>
<a href="http://www.cs.york.ac.uk/fp/">
York Functional Programming Group</a><br>

</td></tr></table>
</body></html>

