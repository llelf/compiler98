<html><head><title>Installing nhc98</title></head>
<body bgcolor=#ffffff>
<table><tr><td width=500>

<center><h1>Installing nhc98</h1></center>

<hr>
<h3>The Brief Version</h3>
<p>
If you are in a hurry to get started, here's the brief version of the
install procedure:
<pre>
    $ ./configure  [ --prefix=/usr/local ]
    $ make [ all ]
    $ make install
</pre>

<h3>System Requirements</h3>
<p>
Users of Windows 95/98 or NT, please see these <a href="windows.html">special
instructions</a> first.

<p>
For the binary release, we assume you have a good C compiler (usually
<em>gcc</em>), and a <em>sh</em> compatible with the Bourne shell.  If
you want to use the trace browser, you will need to have Java on your
PATH.

<p>
For the source release, you need the usual C compilation management
tools (<em>gcc</em>, <em>ar</em>, GNU <em>make</em>, etc.).  To build
<b>nhc98</b> without another Haskell compiler, you need 8Mb of memory
(although you could probably manage with less), and about 17Mb of disk
space (40Mb if you build for profiling and tracing as well).
If you already have another Haskell compiler, <em>hbc</em> or
<em>ghc</em>, then building <b>nhc98</b> will require at least 32Mb of
memory, and 50Mb of free disk space.  If you already have an earlier
version of <em>nhc98</em>, you will need at least 8Mb of memory and 30Mb
of free disk space.  If you don't have <em>hbc</em> or <em>ghc</em> for
your machine, then don't worry, <b>nhc98</b> will build quite happily
using just a C compiler.  (The build is faster and needs much less
memory, but the resulting compiler will be slower.)

<h3>Download it</h3>
<p>
You have the option of building <b>nhc98</b> from a source tree, or
installing a binary-only distribution.  You only need to collect the
single package you require.

<p>
The current distribution packages (and their release status) can be found at
<pre>
    <a href="http://www.cs.york.ac.uk/fp/nhc98/status.html">http://www.cs.york.ac.uk/fp/nhc98/status.html</a>
</pre>
Using <em>tar</em> and <em>gunzip</em>, unpack your chosen package, and
<em>cd</em> to the base directory (called nhc98-x.x, where the x's are the
version number).  Note that all the documentation available on the web
is also included in all packages, although the web versions will of course
be more up-to-date.  Your local copy of the release notes is
in <a href="status.html">docs/status.html</a>.

<h3>Configuration</h3>
<p>
An automatic configuration utility is supplied, called
<em>configure</em>.  In brief, the default behaviour is to build under
the current directory, in <tt>targets</tt>, and to install various
components under <tt>/usr/local</tt>, in the subdirectories
<tt>bin</tt>, <tt>lib/nhc98</tt>, <tt>include/nhc98</tt>, and
<tt>man/man1</tt>.  The config script has several useful options to
override the default build and installation behaviours.  Use the
<tt>--help</tt> option for brief details, and see the page about
<a href=config.html>configuration options</a> for full details.

<p>
<b>Important:</b> The config script searches your system for other
Haskell compilers.  If it guesses wrongly, you can edit the file
<tt>script/hmake.config</tt> to fix things up, then re-run
<em>configure</em>.  Your changes will not be undone.

<h3>Installing from a binary distribution</h3>
<p>
Simply run
<pre>
    ./configure
    make install
</pre>
to install <b>nhc98</b>.  The default location is under
<tt>/usr/local</tt>, but you may alter the installation location using
either of the <tt>--prefix=</tt> or <tt>--installdir=</tt> options
to <em>configure</em>.  There are various other
<a href=config.html>configuration options</a> also.



<h3>Building and installing from sources</h3>
<p>
All object files are created in a separate directory tree from the
sources.  This means it is possible to build concurrently for different
machines from the same shared source tree.  You can also build the heap
profiling, time profiling, and tracing versions of the prelude and
runtime system concurrently if you wish.

<p>
The current distribution of the compiler will build for any machine with
32-bit words.  All questions of machine endian-ness are handled
automatically during configuration.  If you are not using <em>gcc</em>
as your C compiler, please ensure that your <tt>CC</tt> environment
variable is set appropriately at the configuration stage.  (The C
compiler is used as a portable backend for nhc98, and is always
required.)

<p>
Run <tt>./configure</tt> with any <a href=config.html>options</a> you
require.  (You should supply installation directory options at this
stage.)  This will attempt to detect any existing Haskell compilers and
guess which one to build <em>nhc98</em> with.  If you have more than one
available, we will choose, in order of preference, <em>hbc</em>, then
<em>ghc</em>, then an older <em>nhc98</em>.  If no Haskell compiler is
found, <em>nhc98</em> will be built from the bootstrapping C sources
included in the package.

<p>
Then run <tt>make</tt> to build the basic system, or <tt>make all</tt>
if you want profiling and tracing as well.  If you want finer control
over which components of the system are built, try running <tt>make
help</tt> for a list of useful individual targets.

<p>
The time taken to build nhc98 depends on which compiler you are using,
and whether you have asked for just the basic system or the full system.
On a 150Mhz Pentium, a basic build with <em>gcc</em> takes ten minutes,
whilst a full build with <em>ghc</em> takes 4-5 hours.  These are the
two extremes - <em>ghc</em> is much slower than <em>hbc</em> in the
early stages, but slightly faster once the <em>nhc98comp</em> compiler
has been built.

<p>
Finally, when you have built all the components you require,
type <tt>make install</tt>.  If you wish to keep your
disk usage down, use <tt>make clean</tt>, <tt>make realclean</tt>,
or simply delete the entire directory tree.



<h3>Problems?</h3>
<p>
Ok, so now you should have all the components of a working compiler.
If you have any problems, mail
<a href="mailto:Malcolm.Wallace@cs.york.ac.uk?subject=nhc98">
<tt>Malcolm.Wallace@cs.york.ac.uk</tt></a> with a description (and a
bugfix if you have one!).

<h3>Can you help us?</h3>
<p>
If you have built <b>nhc98</b> for a machine not currently listed on the
<a href=status.html>release status page</a> and would like to contribute
it as a binary package for others to download, it is very easy to do.
After building and installing, type `<tt>make binDist</tt>' <em>before</em>
you tidy up with `<tt>make clean</tt>'.  Then upload the resulting tarfile
by ftp to
<pre>
    ftp://ftp.cs.york.ac.uk/pub/haskell/incoming/
</pre>
and send me an email to let me know it's there.

<h3>Keeping up-to-date</h3>
<p>
If you use <b>nhc98</b> regularly, please join the <a href="maillist.html">
nhc-users</a> mailing list for discussion of features, bugfixes, and so on.

<hr>
<p>
The latest updates to these pages are available on the WWW from
<a href="http://www.cs.york.ac.uk/fp/nhc98/">
<tt>http://www.cs.york.ac.uk/fp/nhc98/</tt></a>

<p>
This page last modified: 1999.10.19<br>
<a href="http://www.cs.york.ac.uk/fp/">
York Functional Programming Group</a><br>
Malcolm.Wallace@cs.york.ac.uk

</td></tr></table>
</body></html>

