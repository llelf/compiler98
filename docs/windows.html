<html><head><title>Installing nhc98 under Windows</title></head>
<body bgcolor=#ffffff>
<table><tr><td width=500>

<center><h1>Installing nhc98 under Windows</h1></center>

<hr>

<h3>System Requirements</h3>
<p>
In order to use <b>nhc98</b> under Windows 95/98/ME or NT/2000/XP, you first
need to install the Cygwin DLL, the <em>gcc</em> C compiler, and GNU tools.

<p>
For recent releases of Cygwin (from <em>1.1.0</em> onwards), you should
download the small utility called <em>setup.exe</em> from a Cygwin
mirror FTP site and follow its instructions to install the toolset.
This is an interactive process where you can choose which components
to collect and install.

<p>
(The older Cygwin release <em>1.0</em> was available on CD-ROM only,
and for even older Cygwin versions (<em>b19</em>, <em>b20</em>, and
<em>b20.1</em>), you needed to download and run the self-extracting
archive <em>cygwin/full.exe</em>.)

<p>
Along with <em>gcc</em>, you should also get the <em>bash</em> shell
and lots of other Unix tools, such as <em>tar</em>, <em>gunzip</em>,
and <em>make</em>, which are needed to unpack and build the
<b>nhc98</b> distribution.  (It is safest to simply collect the
entire set of packages.)

<p>
Caution: some people report that their anti-virus software interacts
badly with Cygwin, slowing the entire Windows system to a crawl.
If you are surprised by the slowness of your system, try disabling
(or changing the settings in) your anti-virus package.

<p>
We last tested with Cygwin release <em>1.1.4</em>, together with
<em>gcc 2.95.2-4</em> and <em>make 3.79.1</em>.

<p>
<b>Full information on Cygwin is available from
<a href="http://sources.redhat.com/cygwin/">
<tt>http://sources.redhat.com/cygwin/</tt></a></b>

<p>
In Northern Europe, a good mirror of the Cygwin toolset is
<a href="ftp://sunsite.org.uk/Mirrors/sourceware.cygnus.com/pub/cygwin/">
SunSite</a>.)


<p>
If you have a recent version of GHC (5.00 upwards) already installed
on your Windows system, then there is a specific pitfall to beware of.
<ul>
<li> GHC no longer relies on the Cygwin environment, but is a fully
     native Windows compiler.  This is a good thing in general,
     but it does mean that if you try to use GHC under Cygwin, for
     instance to build nhc98, you may occasionally bump into problems.
     These are largely due to a mismatch between the Windows view of
     the filesystem and the Cygwin view of it.
<li> The build system for nhc98 uses an absolute pathname as the
     destination of a compile command.  This is one of the areas
     where Cygwin and GHC can conflict if you are not careful.  The
     important thing to remember is that the location in which you
     unpack the nhc98 distribution must have the same absolute
     filepath in both Cygwin and Windows.  For instance, a Cygwin
     mount that maps <tt>C:\tmp</tt> to <tt>/tmp</tt> will work fine,
     whereas a mount that maps <tt>C:\cygwin\tmp</tt> to <tt>/tmp</tt>
     will probably not work.
</ul>

<p>
Some people have reported difficulty getting recent releases of nhc98
to build with older versions of Cygwin.  The make fails very quickly,
saying that there is "no rule to make target .../src/runtime/Kernel".
This could be due to one of several causes.
<ul>
<li> Ensure that the environment variable MAKE_MODE is set to UNIX.
<li> Gnu-make's $(patsubst ...) can't handle spaces in directory pathnames
     - so please ensure you don't have any!
<li> Untarring the source package sometimes mistakenly creates
     directory names in upper-case instead of lower-case.  (Ensure you
     untar in Windows itself, rather than onto a Windows partition
     from Linux, for example.)
<li> Some distributions of Gnu-make do not handle globbing in static
     pattern rules as they should.  (make 3.75 in Cygwin b20 is broken,
     although the same version works correctly on other platforms.)
     Upgrade (or downgrade) to a different (working) version of make.
</ul>


<br><br>
<h3>And now...</h3>
<p>
Once you have installed <em>gcc</em> and tools, the standard <a
href="install.html">installation instructions</a> apply.  You have
the option of installing the binary or source distribution packages.
(A prior installation of Cygwin is required even for the binary
distribution.)

<br><br>
<hr>
<p>
The latest updates to these pages are available on the WWW from
<a href="http://www.cs.york.ac.uk/fp/nhc98/">
<tt>http://www.cs.york.ac.uk/fp/nhc98/</tt></a>

<p>
2002.04.05<br>
<a href="http://www.cs.york.ac.uk/fp/">
York Functional Programming Group</a><br>

</td></tr></table>
</body></html>

